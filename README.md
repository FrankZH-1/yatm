<h1 align="center">Welcome to yatm 👋</h1>
<p>
  <a href="https://www.npmjs.com/package/yatm" target="_blank">
    <img alt="Version" src="https://img.shields.io/npm/v/yatm.svg">
  </a>
  <a href="#" target="_blank">
    <img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-yellow.svg" />
  </a>
</p>

> yet another teachermate helper

## Features

- Multi-mode sign-in support: normal, GPS and QR code.
- Sign in **WITHOUT any assistance** from your classmates
- System-level notification support (test on windows 10 & macOS & gnome)
- Active development
- <del>Docker support</del>

## Install

Simply download the latest release.

or you can build on your own.

```sh
yarn install
yarn build
```

## Configuration

**Edit your `config.json` first:**

```javascript
{
  "interval": 3000, // 签到检测轮询间隔，单位 ms
  "wait": 5000,     // 检测到签到后等待时长，单位 ms
  // 用于 GPS 签到（大概是 Google 坐标）
  "lat": 30.511227, // 纬度
  "lon": 114.41021, // 经度
  "clipboard": {//剪贴板指令
    "paste": "pbpaste",//paste不为空后openId将从剪贴板获得
    "copy": "echo {}|pbcopy"//仅在 copy 模式下启用，{} 将被替换为链接
  },
  "qr": { // 用于二维码签到
    "name": "张三", // 微助教用户名，判断签到是否成功
    // 模式
    //   terminal: 终端打印二维码，微信扫码
    //   plain： 终端打印签到URL，微信打开
    //   copy：同 plain，并复制到剪贴板
    "mode": "terminal",
  }
  "ua": "" // 建议使用自己的微信 UA
}

```

## Usage

### Get your `openId`

Get your `openId` from WeChat official account `微助教服务号`. [How?](./AcquireOpenID.md)

**Notice that `openId` will expire after thousands of requests or another entrace from WeChat.**

### Run the script

Run the script, then paste your `openId` into console:

```sh
yarn start
```

or with environments:

```sh
env OPEN_ID=${your openId} yarn start
```

For normal & GPS sign-in, the process is automatic. You don't need to care about anything.

If the `openId` is expired or invaild, you'll get a notification :)

### For QR Code sign-in

Due to the limitation of WeChat API, things are quite different for QR code sign-in.

The script will subscribe the sign-in URL generated by teachermate's server, and print its corresponding QR code to the console when it updates.

You're expected to scan the QR code **manually via WeChat** from your console.

Attention that **the script WILL EXIT INSTANTLY when success, because a QR scan
via WeChat will causes the update of `openId`. You have to reacquire your new
`openId` and run this script again!**

## Author

👤 **maniacata**

- Website: http://blog.plus1sec.cn
- Github: [@ManiaciaChao](https://github.com/ManiaciaChao)

## Show your support

Give a ⭐️ if this project helped you!

---

_This README was generated with ❤️ by [readme-md-generator](https://github.com/kefranabg/readme-md-generator)_
